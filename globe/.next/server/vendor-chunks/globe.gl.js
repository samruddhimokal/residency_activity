"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/globe.gl";
exports.ids = ["vendor-chunks/globe.gl"];
exports.modules = {

/***/ "(ssr)/./node_modules/globe.gl/dist/globe.gl.mjs":
/*!*************************************************!*\
  !*** ./node_modules/globe.gl/dist/globe.gl.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ globe)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_renderers_CSS2DRenderer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three/examples/jsm/renderers/CSS2DRenderer.js */ \"(ssr)/./node_modules/three/examples/jsm/renderers/CSS2DRenderer.js\");\n/* harmony import */ var three_globe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three-globe */ \"(ssr)/./node_modules/three-globe/dist/three-globe.mjs\");\n/* harmony import */ var three_render_objects__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! three-render-objects */ \"(ssr)/./node_modules/three-render-objects/dist/three-render-objects.mjs\");\n/* harmony import */ var accessor_fn__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! accessor-fn */ \"(ssr)/./node_modules/accessor-fn/dist/accessor-fn.mjs\");\n/* harmony import */ var kapsule__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! kapsule */ \"(ssr)/./node_modules/kapsule/dist/kapsule.mjs\");\n/* harmony import */ var _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tweenjs/tween.js */ \"(ssr)/./node_modules/@tweenjs/tween.js/dist/tween.esm.js\");\n\n\n\n\n\n\n\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n  if (typeof document === 'undefined') {\n    return;\n  }\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".scene-container .clickable {\\n  cursor: pointer;\\n}\";\nstyleInject(css_248z);\n\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return _arrayLikeToArray(r);\n}\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nfunction _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = _objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var s = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (e.includes(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nfunction _toConsumableArray(r) {\n  return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread();\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\n\nfunction linkKapsule (kapsulePropName, kapsuleType) {\n  var dummyK = new kapsuleType(); // To extract defaults\n  dummyK._destructor && dummyK._destructor();\n  return {\n    linkProp: function linkProp(prop) {\n      // link property config\n      return {\n        \"default\": dummyK[prop](),\n        onChange: function onChange(v, state) {\n          state[kapsulePropName][prop](v);\n        },\n        triggerUpdate: false\n      };\n    },\n    linkMethod: function linkMethod(method) {\n      // link method pass-through\n      return function (state) {\n        var kapsuleInstance = state[kapsulePropName];\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        var returnVal = kapsuleInstance[method].apply(kapsuleInstance, args);\n        return returnVal === kapsuleInstance ? this // chain based on the parent object, not the inner kapsule\n        : returnVal;\n      };\n    }\n  };\n}\n\nvar _excluded = [\"rendererConfig\", \"waitForGlobeReady\"];\nvar THREE = _objectSpread2(_objectSpread2({}, window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  AmbientLight: three__WEBPACK_IMPORTED_MODULE_2__.AmbientLight,\n  DirectionalLight: three__WEBPACK_IMPORTED_MODULE_2__.DirectionalLight,\n  Vector2: three__WEBPACK_IMPORTED_MODULE_2__.Vector2,\n  REVISION: three__WEBPACK_IMPORTED_MODULE_2__.REVISION\n}), {}, {\n  CSS2DRenderer: three_examples_jsm_renderers_CSS2DRenderer_js__WEBPACK_IMPORTED_MODULE_3__.CSS2DRenderer\n});\n\n//\n\n// Expose config from ThreeGlobe\nvar bindGlobe = linkKapsule('globe', three_globe__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\nvar linkedGlobeProps = Object.assign.apply(Object, _toConsumableArray(['globeImageUrl', 'bumpImageUrl', 'showGlobe', 'showGraticules', 'showAtmosphere', 'atmosphereColor', 'atmosphereAltitude', 'onGlobeReady', 'pointsData', 'pointLat', 'pointLng', 'pointColor', 'pointAltitude', 'pointRadius', 'pointResolution', 'pointsMerge', 'pointsTransitionDuration', 'arcsData', 'arcStartLat', 'arcStartLng', 'arcEndLat', 'arcEndLng', 'arcColor', 'arcAltitude', 'arcAltitudeAutoScale', 'arcStroke', 'arcCurveResolution', 'arcCircularResolution', 'arcDashLength', 'arcDashGap', 'arcDashInitialGap', 'arcDashAnimateTime', 'arcsTransitionDuration', 'polygonsData', 'polygonGeoJsonGeometry', 'polygonCapColor', 'polygonCapMaterial', 'polygonSideColor', 'polygonSideMaterial', 'polygonStrokeColor', 'polygonAltitude', 'polygonCapCurvatureResolution', 'polygonsTransitionDuration', 'pathsData', 'pathPoints', 'pathPointLat', 'pathPointLng', 'pathPointAlt', 'pathResolution', 'pathColor', 'pathStroke', 'pathDashLength', 'pathDashGap', 'pathDashInitialGap', 'pathDashAnimateTime', 'pathTransitionDuration', 'heatmapsData', 'heatmapPoints', 'heatmapPointLat', 'heatmapPointLng', 'heatmapPointWeight', 'heatmapBandwidth', 'heatmapColorFn', 'heatmapColorSaturation', 'heatmapBaseAltitude', 'heatmapTopAltitude', 'heatmapsTransitionDuration', 'hexBinPointsData', 'hexBinPointLat', 'hexBinPointLng', 'hexBinPointWeight', 'hexBinResolution', 'hexMargin', 'hexTopCurvatureResolution', 'hexTopColor', 'hexSideColor', 'hexAltitude', 'hexBinMerge', 'hexTransitionDuration', 'hexPolygonsData', 'hexPolygonGeoJsonGeometry', 'hexPolygonColor', 'hexPolygonAltitude', 'hexPolygonResolution', 'hexPolygonMargin', 'hexPolygonUseDots', 'hexPolygonCurvatureResolution', 'hexPolygonDotResolution', 'hexPolygonsTransitionDuration', 'tilesData', 'tileLat', 'tileLng', 'tileAltitude', 'tileWidth', 'tileHeight', 'tileUseGlobeProjection', 'tileMaterial', 'tileCurvatureResolution', 'tilesTransitionDuration', 'ringsData', 'ringLat', 'ringLng', 'ringAltitude', 'ringColor', 'ringResolution', 'ringMaxRadius', 'ringPropagationSpeed', 'ringRepeatPeriod', 'labelsData', 'labelLat', 'labelLng', 'labelAltitude', 'labelRotation', 'labelText', 'labelSize', 'labelTypeFace', 'labelColor', 'labelResolution', 'labelIncludeDot', 'labelDotRadius', 'labelDotOrientation', 'labelsTransitionDuration', 'htmlElementsData', 'htmlLat', 'htmlLng', 'htmlAltitude', 'htmlElement', 'htmlTransitionDuration', 'objectsData', 'objectLat', 'objectLng', 'objectAltitude', 'objectRotation', 'objectFacesSurface', 'objectThreeObject', 'customLayerData', 'customThreeObject', 'customThreeObjectUpdate'].map(function (p) {\n  return _defineProperty({}, p, bindGlobe.linkProp(p));\n})));\nvar linkedGlobeMethods = Object.assign.apply(Object, _toConsumableArray(['globeMaterial', 'getGlobeRadius', 'getCoords', 'toGeoCoords'].map(function (p) {\n  return _defineProperty({}, p, bindGlobe.linkMethod(p));\n})));\n\n// Expose config from renderObjs\nvar bindRenderObjs = linkKapsule('renderObjs', three_render_objects__WEBPACK_IMPORTED_MODULE_5__[\"default\"]);\nvar linkedRenderObjsProps = Object.assign.apply(Object, _toConsumableArray(['width', 'height', 'backgroundColor', 'backgroundImageUrl', 'enablePointerInteraction'].map(function (p) {\n  return _defineProperty({}, p, bindRenderObjs.linkProp(p));\n})));\nvar linkedRenderObjsMethods = Object.assign.apply(Object, _toConsumableArray(['lights', 'postProcessingComposer'].map(function (p) {\n  return _defineProperty({}, p, bindRenderObjs.linkMethod(p));\n})));\n\n//\n\nvar globe = (0,kapsule__WEBPACK_IMPORTED_MODULE_6__[\"default\"])({\n  props: _objectSpread2(_objectSpread2({\n    onZoom: {\n      triggerUpdate: false\n    },\n    onGlobeClick: {\n      triggerUpdate: false\n    },\n    onGlobeRightClick: {\n      triggerUpdate: false\n    },\n    pointLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onPointClick: {\n      triggerUpdate: false\n    },\n    onPointRightClick: {\n      triggerUpdate: false\n    },\n    onPointHover: {\n      triggerUpdate: false\n    },\n    arcLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onArcClick: {\n      triggerUpdate: false\n    },\n    onArcRightClick: {\n      triggerUpdate: false\n    },\n    onArcHover: {\n      triggerUpdate: false\n    },\n    polygonLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onPolygonClick: {\n      triggerUpdate: false\n    },\n    onPolygonRightClick: {\n      triggerUpdate: false\n    },\n    onPolygonHover: {\n      triggerUpdate: false\n    },\n    pathLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onPathClick: {\n      triggerUpdate: false\n    },\n    onPathRightClick: {\n      triggerUpdate: false\n    },\n    onPathHover: {\n      triggerUpdate: false\n    },\n    onHeatmapClick: {\n      triggerUpdate: false\n    },\n    onHeatmapRightClick: {\n      triggerUpdate: false\n    },\n    onHeatmapHover: {\n      triggerUpdate: false\n    },\n    hexLabel: {\n      triggerUpdate: false\n    },\n    onHexClick: {\n      triggerUpdate: false\n    },\n    onHexRightClick: {\n      triggerUpdate: false\n    },\n    onHexHover: {\n      triggerUpdate: false\n    },\n    hexPolygonLabel: {\n      triggerUpdate: false\n    },\n    onHexPolygonClick: {\n      triggerUpdate: false\n    },\n    onHexPolygonRightClick: {\n      triggerUpdate: false\n    },\n    onHexPolygonHover: {\n      triggerUpdate: false\n    },\n    tileLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onTileClick: {\n      triggerUpdate: false\n    },\n    onTileRightClick: {\n      triggerUpdate: false\n    },\n    onTileHover: {\n      triggerUpdate: false\n    },\n    labelLabel: {\n      triggerUpdate: false\n    },\n    onLabelClick: {\n      triggerUpdate: false\n    },\n    onLabelRightClick: {\n      triggerUpdate: false\n    },\n    onLabelHover: {\n      triggerUpdate: false\n    },\n    objectLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onObjectClick: {\n      triggerUpdate: false\n    },\n    onObjectRightClick: {\n      triggerUpdate: false\n    },\n    onObjectHover: {\n      triggerUpdate: false\n    },\n    customLayerLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onCustomLayerClick: {\n      triggerUpdate: false\n    },\n    onCustomLayerRightClick: {\n      triggerUpdate: false\n    },\n    onCustomLayerHover: {\n      triggerUpdate: false\n    },\n    pointerEventsFilter: {\n      \"default\": function _default() {\n        return true;\n      },\n      triggerUpdate: false,\n      onChange: function onChange(filterFn, state) {\n        return state.renderObjs.hoverFilter(function (obj) {\n          return filterFn(obj, obj.__data);\n        });\n      }\n    },\n    lineHoverPrecision: {\n      \"default\": 0.2,\n      triggerUpdate: false,\n      onChange: function onChange(val, state) {\n        return state.renderObjs.lineHoverPrecision(val);\n      }\n    }\n  }, linkedGlobeProps), linkedRenderObjsProps),\n  methods: _objectSpread2(_objectSpread2({\n    pauseAnimation: function pauseAnimation(state) {\n      var _state$globe;\n      if (state.animationFrameRequestId !== null) {\n        cancelAnimationFrame(state.animationFrameRequestId);\n        state.animationFrameRequestId = null;\n      }\n      (_state$globe = state.globe) === null || _state$globe === void 0 || _state$globe.pauseAnimation();\n      return this;\n    },\n    resumeAnimation: function resumeAnimation(state) {\n      var _state$globe2;\n      if (state.animationFrameRequestId === null) {\n        this._animationCycle();\n      }\n      (_state$globe2 = state.globe) === null || _state$globe2 === void 0 || _state$globe2.resumeAnimation();\n      return this;\n    },\n    _animationCycle: function _animationCycle(state) {\n      // Frame cycle\n      state.renderObjs.tick();\n      state.tweenGroup.update();\n      state.animationFrameRequestId = requestAnimationFrame(this._animationCycle);\n    },\n    pointOfView: function pointOfView(state) {\n      var geoCoords = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var transitionDuration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var curGeoCoords = getGeoCoords();\n\n      // Getter\n      if (geoCoords.lat === undefined && geoCoords.lng === undefined && geoCoords.altitude === undefined) {\n        return curGeoCoords;\n      } else {\n        // Setter\n        var finalGeoCoords = Object.assign({}, curGeoCoords, geoCoords);\n        ['lat', 'lng', 'altitude'].forEach(function (p) {\n          return finalGeoCoords[p] = +finalGeoCoords[p];\n        }); // coerce coords to number\n\n        if (!transitionDuration) {\n          // no animation\n          setCameraPos(finalGeoCoords);\n        } else {\n          // Avoid rotating more than 180deg longitude\n          while (curGeoCoords.lng - finalGeoCoords.lng > 180) curGeoCoords.lng -= 360;\n          while (curGeoCoords.lng - finalGeoCoords.lng < -180) curGeoCoords.lng += 360;\n          state.tweenGroup.add(new _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_1__.Tween(curGeoCoords).to(finalGeoCoords, transitionDuration).easing(_tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_1__.Easing.Cubic.InOut).onUpdate(setCameraPos).start());\n        }\n        return this;\n      }\n\n      //\n\n      function getGeoCoords() {\n        return state.globe.toGeoCoords(state.renderObjs.cameraPosition());\n      }\n      function setCameraPos(_ref5) {\n        var lat = _ref5.lat,\n          lng = _ref5.lng,\n          altitude = _ref5.altitude;\n        state.renderObjs.cameraPosition(state.globe.getCoords(lat, lng, altitude));\n      }\n    },\n    getScreenCoords: function getScreenCoords(state) {\n      var _state$globe3;\n      for (var _len = arguments.length, geoCoords = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        geoCoords[_key - 1] = arguments[_key];\n      }\n      var cartesianCoords = (_state$globe3 = state.globe).getCoords.apply(_state$globe3, geoCoords);\n      return state.renderObjs.getScreenCoords(cartesianCoords.x, cartesianCoords.y, cartesianCoords.z);\n    },\n    toGlobeCoords: function toGlobeCoords(state, x, y) {\n      var globeIntersects = state.renderObjs.intersectingObjects(x, y).find(function (d) {\n        return d.object.__globeObjType === 'globe';\n      });\n      if (!globeIntersects) return null; // coords outside globe\n\n      var _state$globe$toGeoCoo = state.globe.toGeoCoords(globeIntersects.point),\n        lat = _state$globe$toGeoCoo.lat,\n        lng = _state$globe$toGeoCoo.lng;\n      return {\n        lat: lat,\n        lng: lng\n      };\n    },\n    scene: function scene(state) {\n      return state.renderObjs.scene();\n    },\n    // Expose scene\n    camera: function camera(state) {\n      return state.renderObjs.camera();\n    },\n    // Expose camera\n    renderer: function renderer(state) {\n      return state.renderObjs.renderer();\n    },\n    // Expose renderer\n    controls: function controls(state) {\n      return state.renderObjs.controls();\n    },\n    // Expose controls\n    _destructor: function _destructor(state) {\n      state.globe._destructor();\n      this.pauseAnimation();\n      this.pointsData([]);\n      this.arcsData([]);\n      this.polygonsData([]);\n      this.pathsData([]);\n      this.heatmapsData([]);\n      this.hexBinPointsData([]);\n      this.hexPolygonsData([]);\n      this.tilesData([]);\n      this.labelsData([]);\n      this.htmlElementsData([]);\n      this.objectsData([]);\n      this.customLayerData([]);\n    }\n  }, linkedGlobeMethods), linkedRenderObjsMethods),\n  stateInit: function stateInit(_ref6) {\n    var rendererConfig = _ref6.rendererConfig,\n      _ref6$waitForGlobeRea = _ref6.waitForGlobeReady,\n      waitForGlobeReady = _ref6$waitForGlobeRea === void 0 ? true : _ref6$waitForGlobeRea,\n      globeInitConfig = _objectWithoutProperties(_ref6, _excluded);\n    var globe = new three_globe__WEBPACK_IMPORTED_MODULE_4__[\"default\"](_objectSpread2({\n      waitForGlobeReady: waitForGlobeReady\n    }, globeInitConfig));\n    return {\n      globe: globe,\n      renderObjs: (0,three_render_objects__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({\n        controlType: 'orbit',\n        rendererConfig: rendererConfig,\n        waitForLoadComplete: waitForGlobeReady,\n        extraRenderers: [new THREE.CSS2DRenderer()] // Used in HTML elements layer\n      }).skyRadius(globe.getGlobeRadius() * 500).showNavInfo(false).objects([globe]) // Populate scene\n      .lights([new THREE.AmbientLight(0xcccccc, Math.PI), new THREE.DirectionalLight(0xffffff, 0.6 * Math.PI)]),\n      tweenGroup: new _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_1__.Group()\n    };\n  },\n  init: function init(domNode, state) {\n    var _this = this;\n    // Wipe DOM\n    domNode.innerHTML = '';\n\n    // Add relative container\n    domNode.appendChild(state.container = document.createElement('div'));\n    state.container.style.position = 'relative';\n\n    // Add renderObjs\n    var roDomNode = document.createElement('div');\n    state.container.appendChild(roDomNode);\n    state.renderObjs(roDomNode);\n\n    // inject renderer size on three-globe\n    state.globe.rendererSize(state.renderObjs.renderer().getSize(new THREE.Vector2()));\n\n    // set initial distance\n    this.pointOfView({\n      altitude: 2.5\n    });\n\n    // calibrate orbit controls\n    var globeR = state.globe.getGlobeRadius();\n    var controls = state.renderObjs.controls();\n    controls.minDistance = globeR * 1.01; // just above the surface\n    controls.maxDistance = globeR * 100;\n    controls.enablePan = false;\n    controls.enableDamping = true;\n    controls.dampingFactor = 0.1;\n    controls.rotateSpeed = 0.3;\n    controls.zoomSpeed = 0.3;\n    controls.addEventListener('change', function () {\n      // adjust controls speed based on altitude\n      var pov = _this.pointOfView();\n      controls.rotateSpeed = pov.altitude * 0.2; // Math.pow(pov.altitude + 1, 2) * 0.025;\n      controls.zoomSpeed = (pov.altitude + 1) * 0.1; // Math.sqrt(pov.altitude) * 0.2;\n\n      // Update three-globe pov when camera moves, for proper hiding of elements\n      state.globe.setPointOfView(state.renderObjs.camera().position);\n      state.onZoom && state.onZoom(pov);\n    });\n\n    // config renderObjs\n    var getGlobeObj = function getGlobeObj(object) {\n      var obj = object;\n      // recurse up object chain until finding the globe object\n      while (obj && !obj.hasOwnProperty('__globeObjType')) {\n        obj = obj.parent;\n      }\n      return obj;\n    };\n    var dataAccessors = {\n      point: function point(d) {\n        return d;\n      },\n      arc: function arc(d) {\n        return d;\n      },\n      polygon: function polygon(d) {\n        return d.data;\n      },\n      path: function path(d) {\n        return d;\n      },\n      heatmap: function heatmap(d) {\n        return d;\n      },\n      hexbin: function hexbin(d) {\n        return d;\n      },\n      hexPolygon: function hexPolygon(d) {\n        return d;\n      },\n      tile: function tile(d) {\n        return d;\n      },\n      label: function label(d) {\n        return d;\n      },\n      object: function object(d) {\n        return d;\n      },\n      custom: function custom(d) {\n        return d;\n      }\n    };\n    THREE.REVISION < 155 && (state.renderObjs.renderer().useLegacyLights = false); // force behavior of three < 155\n    state.renderObjs.hoverOrderComparator(function (a, b) {\n      var aObj = getGlobeObj(a);\n      var bObj = getGlobeObj(b);\n\n      // de-prioritize background / non-globe objects\n      var isBackground = function isBackground(o) {\n        return !o;\n      }; // || o.__globeObjType === 'globe' || o.__globeObjType === 'atmosphere';\n      return isBackground(aObj) - isBackground(bObj);\n    }).tooltipContent(function (obj) {\n      var objAccessors = {\n        point: state.pointLabel,\n        arc: state.arcLabel,\n        polygon: state.polygonLabel,\n        path: state.pathLabel,\n        hexbin: state.hexLabel,\n        hexPolygon: state.hexPolygonLabel,\n        tile: state.tileLabel,\n        label: state.labelLabel,\n        object: state.objectLabel,\n        custom: state.customLayerLabel\n      };\n      var globeObj = getGlobeObj(obj);\n      var objType = globeObj && globeObj.__globeObjType;\n      return globeObj && objType && objAccessors.hasOwnProperty(objType) && dataAccessors.hasOwnProperty(objType) ? (0,accessor_fn__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(objAccessors[objType])(dataAccessors[objType](globeObj.__data)) || '' : '';\n    }).onHover(function (obj) {\n      // Update tooltip and trigger onHover events\n      var hoverObjFns = {\n        point: state.onPointHover,\n        arc: state.onArcHover,\n        polygon: state.onPolygonHover,\n        path: state.onPathHover,\n        heatmap: state.onHeatmapHover,\n        hexbin: state.onHexHover,\n        hexPolygon: state.onHexPolygonHover,\n        tile: state.onTileHover,\n        label: state.onLabelHover,\n        object: state.onObjectHover,\n        custom: state.onCustomLayerHover\n      };\n      var clickObjFns = {\n        globe: state.onGlobeClick,\n        point: state.onPointClick,\n        arc: state.onArcClick,\n        polygon: state.onPolygonClick,\n        path: state.onPathClick,\n        heatmap: state.onHeatmapClick,\n        hexbin: state.onHexClick,\n        hexPolygon: state.onHexPolygonClick,\n        tile: state.onTileClick,\n        label: state.onLabelClick,\n        object: state.onObjectClick,\n        custom: state.onCustomLayerClick\n      };\n      var hoverObj = getGlobeObj(obj);\n\n      // ignore non-recognised obj types\n      hoverObj && !hoverObjFns.hasOwnProperty(hoverObj.__globeObjType) && (hoverObj = null);\n      if (hoverObj !== state.hoverObj) {\n        var prevObjType = state.hoverObj ? state.hoverObj.__globeObjType : null;\n        var prevObjData = state.hoverObj ? dataAccessors[prevObjType](state.hoverObj.__data) : null;\n        var objType = hoverObj ? hoverObj.__globeObjType : null;\n        var objData = hoverObj ? dataAccessors[objType](hoverObj.__data) : null;\n        if (prevObjType && prevObjType !== objType) {\n          // Hover out\n          hoverObjFns[prevObjType] && hoverObjFns[prevObjType](null, prevObjData);\n        }\n        if (objType) {\n          // Hover in\n          hoverObjFns[objType] && hoverObjFns[objType](objData, prevObjType === objType ? prevObjData : null);\n        }\n\n        // set pointer if hovered object is clickable\n        state.renderObjs.renderer().domElement.classList[objType && clickObjFns[objType] ? 'add' : 'remove']('clickable');\n        state.hoverObj = hoverObj;\n      }\n    }).onClick(function (obj, ev, point) {\n      if (!obj) return; // ignore background clicks\n\n      // Handle click events on objects\n      var objFns = {\n        globe: state.onGlobeClick,\n        point: state.onPointClick,\n        arc: state.onArcClick,\n        polygon: state.onPolygonClick,\n        path: state.onPathClick,\n        heatmap: state.onHeatmapClick,\n        hexbin: state.onHexClick,\n        hexPolygon: state.onHexPolygonClick,\n        tile: state.onTileClick,\n        label: state.onLabelClick,\n        object: state.onObjectClick,\n        custom: state.onCustomLayerClick\n      };\n      var globeObj = getGlobeObj(obj);\n      var objType = globeObj.__globeObjType;\n      if (globeObj && objFns.hasOwnProperty(objType) && objFns[objType]) {\n        var args = [ev];\n\n        // include click coords\n        if (objType === 'globe') {\n          var _this$toGeoCoords = _this.toGeoCoords(point),\n            lat = _this$toGeoCoords.lat,\n            lng = _this$toGeoCoords.lng;\n          args.unshift({\n            lat: lat,\n            lng: lng\n          });\n        } else {\n          args.push(_this.toGeoCoords(point));\n        }\n        dataAccessors.hasOwnProperty(objType) && args.unshift(dataAccessors[objType](globeObj.__data));\n        objFns[objType].apply(objFns, args);\n      }\n    }).onRightClick(function (obj, ev, point) {\n      if (!obj) return; // ignore background clicks\n\n      // Handle right-click events\n      var objFns = {\n        globe: state.onGlobeRightClick,\n        point: state.onPointRightClick,\n        arc: state.onArcRightClick,\n        polygon: state.onPolygonRightClick,\n        path: state.onPathRightClick,\n        heatmap: state.onHeatmapRightClick,\n        hexbin: state.onHexRightClick,\n        hexPolygon: state.onHexPolygonRightClick,\n        tile: state.onTileRightClick,\n        label: state.onLabelRightClick,\n        object: state.onObjectRightClick,\n        custom: state.onCustomLayerRightClick\n      };\n      var globeObj = getGlobeObj(obj);\n      var objType = globeObj.__globeObjType;\n      if (globeObj && objFns.hasOwnProperty(objType) && objFns[objType]) {\n        var args = [ev];\n\n        // include click coords\n        if (objType === 'globe') {\n          var _this$toGeoCoords2 = _this.toGeoCoords(point),\n            lat = _this$toGeoCoords2.lat,\n            lng = _this$toGeoCoords2.lng;\n          args.unshift({\n            lat: lat,\n            lng: lng\n          });\n        } else {\n          args.push(_this.toGeoCoords(point));\n        }\n        dataAccessors.hasOwnProperty(objType) && args.unshift(dataAccessors[objType](globeObj.__data));\n        objFns[objType].apply(objFns, args);\n      }\n    });\n\n    //\n\n    // Kick-off renderer\n    this._animationCycle();\n  }\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZ2xvYmUuZ2wvZGlzdC9nbG9iZS5nbC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMEU7QUFDSTtBQUN6QztBQUNpQjtBQUNqQjtBQUNQO0FBQzJCOztBQUV6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUEsNkNBQTZDLG9CQUFvQixHQUFHO0FBQ3BFOztBQUVBO0FBQ0E7QUFDQSxnQ0FBZ0MsT0FBTztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNCQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYyxrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRkFBK0YsYUFBYTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQSxnQkFBZ0IsK0NBQVk7QUFDNUIsb0JBQW9CLG1EQUFnQjtBQUNwQyxXQUFXLDBDQUFPO0FBQ2xCLFlBQVksMkNBQVE7QUFDcEIsQ0FBQyxLQUFLO0FBQ04saUJBQWlCLHdGQUFhO0FBQzlCLENBQUM7O0FBRUQ7O0FBRUE7QUFDQSxxQ0FBcUMsbURBQVU7QUFDL0M7QUFDQSwyQkFBMkI7QUFDM0IsQ0FBQztBQUNEO0FBQ0EsMkJBQTJCO0FBQzNCLENBQUM7O0FBRUQ7QUFDQSwrQ0FBK0MsNERBQWtCO0FBQ2pFO0FBQ0EsMkJBQTJCO0FBQzNCLENBQUM7QUFDRDtBQUNBLDJCQUEyQjtBQUMzQixDQUFDOztBQUVEOztBQUVBLFlBQVksbURBQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0EsU0FBUyxHQUFHOztBQUVaO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsb0RBQUssNkRBQTZELHFEQUFNO0FBQzNHO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGtHQUFrRyxhQUFhO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCx5Q0FBeUM7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1EQUFVO0FBQzlCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxrQkFBa0IsZ0VBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0Esc0JBQXNCLG9EQUFLO0FBQzNCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRCxxREFBcUQ7O0FBRXJEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9IQUFvSCx1REFBVTtBQUM5SCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsd0JBQXdCOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHdCQUF3Qjs7QUFFeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFMkIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQWRtaW5cXEdsb2JhbC1Ib3VzZS1BY3Rpdml0eVxcZ2xvYmVcXG5vZGVfbW9kdWxlc1xcZ2xvYmUuZ2xcXGRpc3RcXGdsb2JlLmdsLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSRVZJU0lPTiwgVmVjdG9yMiwgRGlyZWN0aW9uYWxMaWdodCwgQW1iaWVudExpZ2h0IH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgQ1NTMkRSZW5kZXJlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9yZW5kZXJlcnMvQ1NTMkRSZW5kZXJlci5qcyc7XG5pbXBvcnQgVGhyZWVHbG9iZSBmcm9tICd0aHJlZS1nbG9iZSc7XG5pbXBvcnQgVGhyZWVSZW5kZXJPYmplY3RzIGZyb20gJ3RocmVlLXJlbmRlci1vYmplY3RzJztcbmltcG9ydCBhY2Nlc3NvckZuIGZyb20gJ2FjY2Vzc29yLWZuJztcbmltcG9ydCBLYXBzdWxlIGZyb20gJ2thcHN1bGUnO1xuaW1wb3J0IHsgR3JvdXAsIFR3ZWVuLCBFYXNpbmcgfSBmcm9tICdAdHdlZW5qcy90d2Vlbi5qcyc7XG5cbmZ1bmN0aW9uIHN0eWxlSW5qZWN0KGNzcywgcmVmKSB7XG4gIGlmIChyZWYgPT09IHZvaWQgMCkgcmVmID0ge307XG4gIHZhciBpbnNlcnRBdCA9IHJlZi5pbnNlcnRBdDtcbiAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGhlYWQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnO1xuICBpZiAoaW5zZXJ0QXQgPT09ICd0b3AnKSB7XG4gICAgaWYgKGhlYWQuZmlyc3RDaGlsZCkge1xuICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoc3R5bGUsIGhlYWQuZmlyc3RDaGlsZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBoZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgY3NzXzI0OHogPSBcIi5zY2VuZS1jb250YWluZXIgLmNsaWNrYWJsZSB7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxufVwiO1xuc3R5bGVJbmplY3QoY3NzXzI0OHopO1xuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSB7XG4gIChudWxsID09IGEgfHwgYSA+IHIubGVuZ3RoKSAmJiAoYSA9IHIubGVuZ3RoKTtcbiAgZm9yICh2YXIgZSA9IDAsIG4gPSBBcnJheShhKTsgZSA8IGE7IGUrKykgbltlXSA9IHJbZV07XG4gIHJldHVybiBuO1xufVxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKHIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkocikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShyKTtcbn1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0KSB7XG4gIHJldHVybiAociA9IF90b1Byb3BlcnR5S2V5KHIpKSBpbiBlID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIHtcbiAgICB2YWx1ZTogdCxcbiAgICBlbnVtZXJhYmxlOiAhMCxcbiAgICBjb25maWd1cmFibGU6ICEwLFxuICAgIHdyaXRhYmxlOiAhMFxuICB9KSA6IGVbcl0gPSB0LCBlO1xufVxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShyKSB7XG4gIGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgbnVsbCAhPSByW1N5bWJvbC5pdGVyYXRvcl0gfHwgbnVsbCAhPSByW1wiQEBpdGVyYXRvclwiXSkgcmV0dXJuIEFycmF5LmZyb20ocik7XG59XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7XG4gIHZhciB0ID0gT2JqZWN0LmtleXMoZSk7XG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO1xuICAgIHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikge1xuICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTtcbiAgICB9KSksIHQucHVzaC5hcHBseSh0LCBvKTtcbiAgfVxuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQyKGUpIHtcbiAgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHtcbiAgICB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307XG4gICAgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHtcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTtcbiAgICB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhlLCB0KSB7XG4gIGlmIChudWxsID09IGUpIHJldHVybiB7fTtcbiAgdmFyIG8sXG4gICAgcixcbiAgICBpID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoZSwgdCk7XG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO1xuICAgIGZvciAociA9IDA7IHIgPCBzLmxlbmd0aDsgcisrKSBvID0gc1tyXSwgdC5pbmNsdWRlcyhvKSB8fCB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsIG8pICYmIChpW29dID0gZVtvXSk7XG4gIH1cbiAgcmV0dXJuIGk7XG59XG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShyLCBlKSB7XG4gIGlmIChudWxsID09IHIpIHJldHVybiB7fTtcbiAgdmFyIHQgPSB7fTtcbiAgZm9yICh2YXIgbiBpbiByKSBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChyLCBuKSkge1xuICAgIGlmIChlLmluY2x1ZGVzKG4pKSBjb250aW51ZTtcbiAgICB0W25dID0gcltuXTtcbiAgfVxuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShyKSB7XG4gIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMocikgfHwgX2l0ZXJhYmxlVG9BcnJheShyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkocikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikge1xuICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgdCB8fCAhdCkgcmV0dXJuIHQ7XG4gIHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdO1xuICBpZiAodm9pZCAwICE9PSBlKSB7XG4gICAgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7XG4gICAgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIGkpIHJldHVybiBpO1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTtcbiAgfVxuICByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpO1xufVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkge1xuICB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTtcbiAgcmV0dXJuIFwic3ltYm9sXCIgPT0gdHlwZW9mIGkgPyBpIDogaSArIFwiXCI7XG59XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgYSkge1xuICBpZiAocikge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7XG4gICAgdmFyIHQgPSB7fS50b1N0cmluZy5jYWxsKHIpLnNsaWNlKDgsIC0xKTtcbiAgICByZXR1cm4gXCJPYmplY3RcIiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgXCJNYXBcIiA9PT0gdCB8fCBcIlNldFwiID09PSB0ID8gQXJyYXkuZnJvbShyKSA6IFwiQXJndW1lbnRzXCIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDtcbiAgfVxufVxuXG5mdW5jdGlvbiBsaW5rS2Fwc3VsZSAoa2Fwc3VsZVByb3BOYW1lLCBrYXBzdWxlVHlwZSkge1xuICB2YXIgZHVtbXlLID0gbmV3IGthcHN1bGVUeXBlKCk7IC8vIFRvIGV4dHJhY3QgZGVmYXVsdHNcbiAgZHVtbXlLLl9kZXN0cnVjdG9yICYmIGR1bW15Sy5fZGVzdHJ1Y3RvcigpO1xuICByZXR1cm4ge1xuICAgIGxpbmtQcm9wOiBmdW5jdGlvbiBsaW5rUHJvcChwcm9wKSB7XG4gICAgICAvLyBsaW5rIHByb3BlcnR5IGNvbmZpZ1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgXCJkZWZhdWx0XCI6IGR1bW15S1twcm9wXSgpLFxuICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2Uodiwgc3RhdGUpIHtcbiAgICAgICAgICBzdGF0ZVtrYXBzdWxlUHJvcE5hbWVdW3Byb3BdKHYpO1xuICAgICAgICB9LFxuICAgICAgICB0cmlnZ2VyVXBkYXRlOiBmYWxzZVxuICAgICAgfTtcbiAgICB9LFxuICAgIGxpbmtNZXRob2Q6IGZ1bmN0aW9uIGxpbmtNZXRob2QobWV0aG9kKSB7XG4gICAgICAvLyBsaW5rIG1ldGhvZCBwYXNzLXRocm91Z2hcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIGthcHN1bGVJbnN0YW5jZSA9IHN0YXRlW2thcHN1bGVQcm9wTmFtZV07XG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmV0dXJuVmFsID0ga2Fwc3VsZUluc3RhbmNlW21ldGhvZF0uYXBwbHkoa2Fwc3VsZUluc3RhbmNlLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIHJldHVyblZhbCA9PT0ga2Fwc3VsZUluc3RhbmNlID8gdGhpcyAvLyBjaGFpbiBiYXNlZCBvbiB0aGUgcGFyZW50IG9iamVjdCwgbm90IHRoZSBpbm5lciBrYXBzdWxlXG4gICAgICAgIDogcmV0dXJuVmFsO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XG5cbnZhciBfZXhjbHVkZWQgPSBbXCJyZW5kZXJlckNvbmZpZ1wiLCBcIndhaXRGb3JHbG9iZVJlYWR5XCJdO1xudmFyIFRIUkVFID0gX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIHdpbmRvdy5USFJFRSA/IHdpbmRvdy5USFJFRSAvLyBQcmVmZXIgY29uc3VtcHRpb24gZnJvbSBnbG9iYWwgVEhSRUUsIGlmIGV4aXN0c1xuOiB7XG4gIEFtYmllbnRMaWdodDogQW1iaWVudExpZ2h0LFxuICBEaXJlY3Rpb25hbExpZ2h0OiBEaXJlY3Rpb25hbExpZ2h0LFxuICBWZWN0b3IyOiBWZWN0b3IyLFxuICBSRVZJU0lPTjogUkVWSVNJT05cbn0pLCB7fSwge1xuICBDU1MyRFJlbmRlcmVyOiBDU1MyRFJlbmRlcmVyXG59KTtcblxuLy9cblxuLy8gRXhwb3NlIGNvbmZpZyBmcm9tIFRocmVlR2xvYmVcbnZhciBiaW5kR2xvYmUgPSBsaW5rS2Fwc3VsZSgnZ2xvYmUnLCBUaHJlZUdsb2JlKTtcbnZhciBsaW5rZWRHbG9iZVByb3BzID0gT2JqZWN0LmFzc2lnbi5hcHBseShPYmplY3QsIF90b0NvbnN1bWFibGVBcnJheShbJ2dsb2JlSW1hZ2VVcmwnLCAnYnVtcEltYWdlVXJsJywgJ3Nob3dHbG9iZScsICdzaG93R3JhdGljdWxlcycsICdzaG93QXRtb3NwaGVyZScsICdhdG1vc3BoZXJlQ29sb3InLCAnYXRtb3NwaGVyZUFsdGl0dWRlJywgJ29uR2xvYmVSZWFkeScsICdwb2ludHNEYXRhJywgJ3BvaW50TGF0JywgJ3BvaW50TG5nJywgJ3BvaW50Q29sb3InLCAncG9pbnRBbHRpdHVkZScsICdwb2ludFJhZGl1cycsICdwb2ludFJlc29sdXRpb24nLCAncG9pbnRzTWVyZ2UnLCAncG9pbnRzVHJhbnNpdGlvbkR1cmF0aW9uJywgJ2FyY3NEYXRhJywgJ2FyY1N0YXJ0TGF0JywgJ2FyY1N0YXJ0TG5nJywgJ2FyY0VuZExhdCcsICdhcmNFbmRMbmcnLCAnYXJjQ29sb3InLCAnYXJjQWx0aXR1ZGUnLCAnYXJjQWx0aXR1ZGVBdXRvU2NhbGUnLCAnYXJjU3Ryb2tlJywgJ2FyY0N1cnZlUmVzb2x1dGlvbicsICdhcmNDaXJjdWxhclJlc29sdXRpb24nLCAnYXJjRGFzaExlbmd0aCcsICdhcmNEYXNoR2FwJywgJ2FyY0Rhc2hJbml0aWFsR2FwJywgJ2FyY0Rhc2hBbmltYXRlVGltZScsICdhcmNzVHJhbnNpdGlvbkR1cmF0aW9uJywgJ3BvbHlnb25zRGF0YScsICdwb2x5Z29uR2VvSnNvbkdlb21ldHJ5JywgJ3BvbHlnb25DYXBDb2xvcicsICdwb2x5Z29uQ2FwTWF0ZXJpYWwnLCAncG9seWdvblNpZGVDb2xvcicsICdwb2x5Z29uU2lkZU1hdGVyaWFsJywgJ3BvbHlnb25TdHJva2VDb2xvcicsICdwb2x5Z29uQWx0aXR1ZGUnLCAncG9seWdvbkNhcEN1cnZhdHVyZVJlc29sdXRpb24nLCAncG9seWdvbnNUcmFuc2l0aW9uRHVyYXRpb24nLCAncGF0aHNEYXRhJywgJ3BhdGhQb2ludHMnLCAncGF0aFBvaW50TGF0JywgJ3BhdGhQb2ludExuZycsICdwYXRoUG9pbnRBbHQnLCAncGF0aFJlc29sdXRpb24nLCAncGF0aENvbG9yJywgJ3BhdGhTdHJva2UnLCAncGF0aERhc2hMZW5ndGgnLCAncGF0aERhc2hHYXAnLCAncGF0aERhc2hJbml0aWFsR2FwJywgJ3BhdGhEYXNoQW5pbWF0ZVRpbWUnLCAncGF0aFRyYW5zaXRpb25EdXJhdGlvbicsICdoZWF0bWFwc0RhdGEnLCAnaGVhdG1hcFBvaW50cycsICdoZWF0bWFwUG9pbnRMYXQnLCAnaGVhdG1hcFBvaW50TG5nJywgJ2hlYXRtYXBQb2ludFdlaWdodCcsICdoZWF0bWFwQmFuZHdpZHRoJywgJ2hlYXRtYXBDb2xvckZuJywgJ2hlYXRtYXBDb2xvclNhdHVyYXRpb24nLCAnaGVhdG1hcEJhc2VBbHRpdHVkZScsICdoZWF0bWFwVG9wQWx0aXR1ZGUnLCAnaGVhdG1hcHNUcmFuc2l0aW9uRHVyYXRpb24nLCAnaGV4QmluUG9pbnRzRGF0YScsICdoZXhCaW5Qb2ludExhdCcsICdoZXhCaW5Qb2ludExuZycsICdoZXhCaW5Qb2ludFdlaWdodCcsICdoZXhCaW5SZXNvbHV0aW9uJywgJ2hleE1hcmdpbicsICdoZXhUb3BDdXJ2YXR1cmVSZXNvbHV0aW9uJywgJ2hleFRvcENvbG9yJywgJ2hleFNpZGVDb2xvcicsICdoZXhBbHRpdHVkZScsICdoZXhCaW5NZXJnZScsICdoZXhUcmFuc2l0aW9uRHVyYXRpb24nLCAnaGV4UG9seWdvbnNEYXRhJywgJ2hleFBvbHlnb25HZW9Kc29uR2VvbWV0cnknLCAnaGV4UG9seWdvbkNvbG9yJywgJ2hleFBvbHlnb25BbHRpdHVkZScsICdoZXhQb2x5Z29uUmVzb2x1dGlvbicsICdoZXhQb2x5Z29uTWFyZ2luJywgJ2hleFBvbHlnb25Vc2VEb3RzJywgJ2hleFBvbHlnb25DdXJ2YXR1cmVSZXNvbHV0aW9uJywgJ2hleFBvbHlnb25Eb3RSZXNvbHV0aW9uJywgJ2hleFBvbHlnb25zVHJhbnNpdGlvbkR1cmF0aW9uJywgJ3RpbGVzRGF0YScsICd0aWxlTGF0JywgJ3RpbGVMbmcnLCAndGlsZUFsdGl0dWRlJywgJ3RpbGVXaWR0aCcsICd0aWxlSGVpZ2h0JywgJ3RpbGVVc2VHbG9iZVByb2plY3Rpb24nLCAndGlsZU1hdGVyaWFsJywgJ3RpbGVDdXJ2YXR1cmVSZXNvbHV0aW9uJywgJ3RpbGVzVHJhbnNpdGlvbkR1cmF0aW9uJywgJ3JpbmdzRGF0YScsICdyaW5nTGF0JywgJ3JpbmdMbmcnLCAncmluZ0FsdGl0dWRlJywgJ3JpbmdDb2xvcicsICdyaW5nUmVzb2x1dGlvbicsICdyaW5nTWF4UmFkaXVzJywgJ3JpbmdQcm9wYWdhdGlvblNwZWVkJywgJ3JpbmdSZXBlYXRQZXJpb2QnLCAnbGFiZWxzRGF0YScsICdsYWJlbExhdCcsICdsYWJlbExuZycsICdsYWJlbEFsdGl0dWRlJywgJ2xhYmVsUm90YXRpb24nLCAnbGFiZWxUZXh0JywgJ2xhYmVsU2l6ZScsICdsYWJlbFR5cGVGYWNlJywgJ2xhYmVsQ29sb3InLCAnbGFiZWxSZXNvbHV0aW9uJywgJ2xhYmVsSW5jbHVkZURvdCcsICdsYWJlbERvdFJhZGl1cycsICdsYWJlbERvdE9yaWVudGF0aW9uJywgJ2xhYmVsc1RyYW5zaXRpb25EdXJhdGlvbicsICdodG1sRWxlbWVudHNEYXRhJywgJ2h0bWxMYXQnLCAnaHRtbExuZycsICdodG1sQWx0aXR1ZGUnLCAnaHRtbEVsZW1lbnQnLCAnaHRtbFRyYW5zaXRpb25EdXJhdGlvbicsICdvYmplY3RzRGF0YScsICdvYmplY3RMYXQnLCAnb2JqZWN0TG5nJywgJ29iamVjdEFsdGl0dWRlJywgJ29iamVjdFJvdGF0aW9uJywgJ29iamVjdEZhY2VzU3VyZmFjZScsICdvYmplY3RUaHJlZU9iamVjdCcsICdjdXN0b21MYXllckRhdGEnLCAnY3VzdG9tVGhyZWVPYmplY3QnLCAnY3VzdG9tVGhyZWVPYmplY3RVcGRhdGUnXS5tYXAoZnVuY3Rpb24gKHApIHtcbiAgcmV0dXJuIF9kZWZpbmVQcm9wZXJ0eSh7fSwgcCwgYmluZEdsb2JlLmxpbmtQcm9wKHApKTtcbn0pKSk7XG52YXIgbGlua2VkR2xvYmVNZXRob2RzID0gT2JqZWN0LmFzc2lnbi5hcHBseShPYmplY3QsIF90b0NvbnN1bWFibGVBcnJheShbJ2dsb2JlTWF0ZXJpYWwnLCAnZ2V0R2xvYmVSYWRpdXMnLCAnZ2V0Q29vcmRzJywgJ3RvR2VvQ29vcmRzJ10ubWFwKGZ1bmN0aW9uIChwKSB7XG4gIHJldHVybiBfZGVmaW5lUHJvcGVydHkoe30sIHAsIGJpbmRHbG9iZS5saW5rTWV0aG9kKHApKTtcbn0pKSk7XG5cbi8vIEV4cG9zZSBjb25maWcgZnJvbSByZW5kZXJPYmpzXG52YXIgYmluZFJlbmRlck9ianMgPSBsaW5rS2Fwc3VsZSgncmVuZGVyT2JqcycsIFRocmVlUmVuZGVyT2JqZWN0cyk7XG52YXIgbGlua2VkUmVuZGVyT2Jqc1Byb3BzID0gT2JqZWN0LmFzc2lnbi5hcHBseShPYmplY3QsIF90b0NvbnN1bWFibGVBcnJheShbJ3dpZHRoJywgJ2hlaWdodCcsICdiYWNrZ3JvdW5kQ29sb3InLCAnYmFja2dyb3VuZEltYWdlVXJsJywgJ2VuYWJsZVBvaW50ZXJJbnRlcmFjdGlvbiddLm1hcChmdW5jdGlvbiAocCkge1xuICByZXR1cm4gX2RlZmluZVByb3BlcnR5KHt9LCBwLCBiaW5kUmVuZGVyT2Jqcy5saW5rUHJvcChwKSk7XG59KSkpO1xudmFyIGxpbmtlZFJlbmRlck9ianNNZXRob2RzID0gT2JqZWN0LmFzc2lnbi5hcHBseShPYmplY3QsIF90b0NvbnN1bWFibGVBcnJheShbJ2xpZ2h0cycsICdwb3N0UHJvY2Vzc2luZ0NvbXBvc2VyJ10ubWFwKGZ1bmN0aW9uIChwKSB7XG4gIHJldHVybiBfZGVmaW5lUHJvcGVydHkoe30sIHAsIGJpbmRSZW5kZXJPYmpzLmxpbmtNZXRob2QocCkpO1xufSkpKTtcblxuLy9cblxudmFyIGdsb2JlID0gS2Fwc3VsZSh7XG4gIHByb3BzOiBfb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7XG4gICAgb25ab29tOiB7XG4gICAgICB0cmlnZ2VyVXBkYXRlOiBmYWxzZVxuICAgIH0sXG4gICAgb25HbG9iZUNsaWNrOiB7XG4gICAgICB0cmlnZ2VyVXBkYXRlOiBmYWxzZVxuICAgIH0sXG4gICAgb25HbG9iZVJpZ2h0Q2xpY2s6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBwb2ludExhYmVsOiB7XG4gICAgICBcImRlZmF1bHRcIjogJ25hbWUnLFxuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIG9uUG9pbnRDbGljazoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIG9uUG9pbnRSaWdodENsaWNrOiB7XG4gICAgICB0cmlnZ2VyVXBkYXRlOiBmYWxzZVxuICAgIH0sXG4gICAgb25Qb2ludEhvdmVyOiB7XG4gICAgICB0cmlnZ2VyVXBkYXRlOiBmYWxzZVxuICAgIH0sXG4gICAgYXJjTGFiZWw6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiAnbmFtZScsXG4gICAgICB0cmlnZ2VyVXBkYXRlOiBmYWxzZVxuICAgIH0sXG4gICAgb25BcmNDbGljazoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIG9uQXJjUmlnaHRDbGljazoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIG9uQXJjSG92ZXI6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBwb2x5Z29uTGFiZWw6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiAnbmFtZScsXG4gICAgICB0cmlnZ2VyVXBkYXRlOiBmYWxzZVxuICAgIH0sXG4gICAgb25Qb2x5Z29uQ2xpY2s6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvblBvbHlnb25SaWdodENsaWNrOiB7XG4gICAgICB0cmlnZ2VyVXBkYXRlOiBmYWxzZVxuICAgIH0sXG4gICAgb25Qb2x5Z29uSG92ZXI6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBwYXRoTGFiZWw6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiAnbmFtZScsXG4gICAgICB0cmlnZ2VyVXBkYXRlOiBmYWxzZVxuICAgIH0sXG4gICAgb25QYXRoQ2xpY2s6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvblBhdGhSaWdodENsaWNrOiB7XG4gICAgICB0cmlnZ2VyVXBkYXRlOiBmYWxzZVxuICAgIH0sXG4gICAgb25QYXRoSG92ZXI6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvbkhlYXRtYXBDbGljazoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIG9uSGVhdG1hcFJpZ2h0Q2xpY2s6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvbkhlYXRtYXBIb3Zlcjoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIGhleExhYmVsOiB7XG4gICAgICB0cmlnZ2VyVXBkYXRlOiBmYWxzZVxuICAgIH0sXG4gICAgb25IZXhDbGljazoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIG9uSGV4UmlnaHRDbGljazoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIG9uSGV4SG92ZXI6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBoZXhQb2x5Z29uTGFiZWw6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvbkhleFBvbHlnb25DbGljazoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIG9uSGV4UG9seWdvblJpZ2h0Q2xpY2s6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvbkhleFBvbHlnb25Ib3Zlcjoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIHRpbGVMYWJlbDoge1xuICAgICAgXCJkZWZhdWx0XCI6ICduYW1lJyxcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvblRpbGVDbGljazoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIG9uVGlsZVJpZ2h0Q2xpY2s6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvblRpbGVIb3Zlcjoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIGxhYmVsTGFiZWw6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvbkxhYmVsQ2xpY2s6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvbkxhYmVsUmlnaHRDbGljazoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIG9uTGFiZWxIb3Zlcjoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIG9iamVjdExhYmVsOiB7XG4gICAgICBcImRlZmF1bHRcIjogJ25hbWUnLFxuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIG9uT2JqZWN0Q2xpY2s6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvbk9iamVjdFJpZ2h0Q2xpY2s6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvbk9iamVjdEhvdmVyOiB7XG4gICAgICB0cmlnZ2VyVXBkYXRlOiBmYWxzZVxuICAgIH0sXG4gICAgY3VzdG9tTGF5ZXJMYWJlbDoge1xuICAgICAgXCJkZWZhdWx0XCI6ICduYW1lJyxcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvbkN1c3RvbUxheWVyQ2xpY2s6IHtcbiAgICAgIHRyaWdnZXJVcGRhdGU6IGZhbHNlXG4gICAgfSxcbiAgICBvbkN1c3RvbUxheWVyUmlnaHRDbGljazoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIG9uQ3VzdG9tTGF5ZXJIb3Zlcjoge1xuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIHBvaW50ZXJFdmVudHNGaWx0ZXI6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9LFxuICAgICAgdHJpZ2dlclVwZGF0ZTogZmFsc2UsXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZmlsdGVyRm4sIHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZS5yZW5kZXJPYmpzLmhvdmVyRmlsdGVyKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICByZXR1cm4gZmlsdGVyRm4ob2JqLCBvYmouX19kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBsaW5lSG92ZXJQcmVjaXNpb246IHtcbiAgICAgIFwiZGVmYXVsdFwiOiAwLjIsXG4gICAgICB0cmlnZ2VyVXBkYXRlOiBmYWxzZSxcbiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSh2YWwsIHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZS5yZW5kZXJPYmpzLmxpbmVIb3ZlclByZWNpc2lvbih2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgbGlua2VkR2xvYmVQcm9wcyksIGxpbmtlZFJlbmRlck9ianNQcm9wcyksXG4gIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHtcbiAgICBwYXVzZUFuaW1hdGlvbjogZnVuY3Rpb24gcGF1c2VBbmltYXRpb24oc3RhdGUpIHtcbiAgICAgIHZhciBfc3RhdGUkZ2xvYmU7XG4gICAgICBpZiAoc3RhdGUuYW5pbWF0aW9uRnJhbWVSZXF1ZXN0SWQgIT09IG51bGwpIHtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoc3RhdGUuYW5pbWF0aW9uRnJhbWVSZXF1ZXN0SWQpO1xuICAgICAgICBzdGF0ZS5hbmltYXRpb25GcmFtZVJlcXVlc3RJZCA9IG51bGw7XG4gICAgICB9XG4gICAgICAoX3N0YXRlJGdsb2JlID0gc3RhdGUuZ2xvYmUpID09PSBudWxsIHx8IF9zdGF0ZSRnbG9iZSA9PT0gdm9pZCAwIHx8IF9zdGF0ZSRnbG9iZS5wYXVzZUFuaW1hdGlvbigpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICByZXN1bWVBbmltYXRpb246IGZ1bmN0aW9uIHJlc3VtZUFuaW1hdGlvbihzdGF0ZSkge1xuICAgICAgdmFyIF9zdGF0ZSRnbG9iZTI7XG4gICAgICBpZiAoc3RhdGUuYW5pbWF0aW9uRnJhbWVSZXF1ZXN0SWQgPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uQ3ljbGUoKTtcbiAgICAgIH1cbiAgICAgIChfc3RhdGUkZ2xvYmUyID0gc3RhdGUuZ2xvYmUpID09PSBudWxsIHx8IF9zdGF0ZSRnbG9iZTIgPT09IHZvaWQgMCB8fCBfc3RhdGUkZ2xvYmUyLnJlc3VtZUFuaW1hdGlvbigpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBfYW5pbWF0aW9uQ3ljbGU6IGZ1bmN0aW9uIF9hbmltYXRpb25DeWNsZShzdGF0ZSkge1xuICAgICAgLy8gRnJhbWUgY3ljbGVcbiAgICAgIHN0YXRlLnJlbmRlck9ianMudGljaygpO1xuICAgICAgc3RhdGUudHdlZW5Hcm91cC51cGRhdGUoKTtcbiAgICAgIHN0YXRlLmFuaW1hdGlvbkZyYW1lUmVxdWVzdElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkN5Y2xlKTtcbiAgICB9LFxuICAgIHBvaW50T2ZWaWV3OiBmdW5jdGlvbiBwb2ludE9mVmlldyhzdGF0ZSkge1xuICAgICAgdmFyIGdlb0Nvb3JkcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAwO1xuICAgICAgdmFyIGN1ckdlb0Nvb3JkcyA9IGdldEdlb0Nvb3JkcygpO1xuXG4gICAgICAvLyBHZXR0ZXJcbiAgICAgIGlmIChnZW9Db29yZHMubGF0ID09PSB1bmRlZmluZWQgJiYgZ2VvQ29vcmRzLmxuZyA9PT0gdW5kZWZpbmVkICYmIGdlb0Nvb3Jkcy5hbHRpdHVkZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBjdXJHZW9Db29yZHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTZXR0ZXJcbiAgICAgICAgdmFyIGZpbmFsR2VvQ29vcmRzID0gT2JqZWN0LmFzc2lnbih7fSwgY3VyR2VvQ29vcmRzLCBnZW9Db29yZHMpO1xuICAgICAgICBbJ2xhdCcsICdsbmcnLCAnYWx0aXR1ZGUnXS5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgcmV0dXJuIGZpbmFsR2VvQ29vcmRzW3BdID0gK2ZpbmFsR2VvQ29vcmRzW3BdO1xuICAgICAgICB9KTsgLy8gY29lcmNlIGNvb3JkcyB0byBudW1iZXJcblxuICAgICAgICBpZiAoIXRyYW5zaXRpb25EdXJhdGlvbikge1xuICAgICAgICAgIC8vIG5vIGFuaW1hdGlvblxuICAgICAgICAgIHNldENhbWVyYVBvcyhmaW5hbEdlb0Nvb3Jkcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQXZvaWQgcm90YXRpbmcgbW9yZSB0aGFuIDE4MGRlZyBsb25naXR1ZGVcbiAgICAgICAgICB3aGlsZSAoY3VyR2VvQ29vcmRzLmxuZyAtIGZpbmFsR2VvQ29vcmRzLmxuZyA+IDE4MCkgY3VyR2VvQ29vcmRzLmxuZyAtPSAzNjA7XG4gICAgICAgICAgd2hpbGUgKGN1ckdlb0Nvb3Jkcy5sbmcgLSBmaW5hbEdlb0Nvb3Jkcy5sbmcgPCAtMTgwKSBjdXJHZW9Db29yZHMubG5nICs9IDM2MDtcbiAgICAgICAgICBzdGF0ZS50d2Vlbkdyb3VwLmFkZChuZXcgVHdlZW4oY3VyR2VvQ29vcmRzKS50byhmaW5hbEdlb0Nvb3JkcywgdHJhbnNpdGlvbkR1cmF0aW9uKS5lYXNpbmcoRWFzaW5nLkN1YmljLkluT3V0KS5vblVwZGF0ZShzZXRDYW1lcmFQb3MpLnN0YXJ0KCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvL1xuXG4gICAgICBmdW5jdGlvbiBnZXRHZW9Db29yZHMoKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZS5nbG9iZS50b0dlb0Nvb3JkcyhzdGF0ZS5yZW5kZXJPYmpzLmNhbWVyYVBvc2l0aW9uKCkpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gc2V0Q2FtZXJhUG9zKF9yZWY1KSB7XG4gICAgICAgIHZhciBsYXQgPSBfcmVmNS5sYXQsXG4gICAgICAgICAgbG5nID0gX3JlZjUubG5nLFxuICAgICAgICAgIGFsdGl0dWRlID0gX3JlZjUuYWx0aXR1ZGU7XG4gICAgICAgIHN0YXRlLnJlbmRlck9ianMuY2FtZXJhUG9zaXRpb24oc3RhdGUuZ2xvYmUuZ2V0Q29vcmRzKGxhdCwgbG5nLCBhbHRpdHVkZSkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0U2NyZWVuQ29vcmRzOiBmdW5jdGlvbiBnZXRTY3JlZW5Db29yZHMoc3RhdGUpIHtcbiAgICAgIHZhciBfc3RhdGUkZ2xvYmUzO1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGdlb0Nvb3JkcyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGdlb0Nvb3Jkc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICB9XG4gICAgICB2YXIgY2FydGVzaWFuQ29vcmRzID0gKF9zdGF0ZSRnbG9iZTMgPSBzdGF0ZS5nbG9iZSkuZ2V0Q29vcmRzLmFwcGx5KF9zdGF0ZSRnbG9iZTMsIGdlb0Nvb3Jkcyk7XG4gICAgICByZXR1cm4gc3RhdGUucmVuZGVyT2Jqcy5nZXRTY3JlZW5Db29yZHMoY2FydGVzaWFuQ29vcmRzLngsIGNhcnRlc2lhbkNvb3Jkcy55LCBjYXJ0ZXNpYW5Db29yZHMueik7XG4gICAgfSxcbiAgICB0b0dsb2JlQ29vcmRzOiBmdW5jdGlvbiB0b0dsb2JlQ29vcmRzKHN0YXRlLCB4LCB5KSB7XG4gICAgICB2YXIgZ2xvYmVJbnRlcnNlY3RzID0gc3RhdGUucmVuZGVyT2Jqcy5pbnRlcnNlY3RpbmdPYmplY3RzKHgsIHkpLmZpbmQoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIGQub2JqZWN0Ll9fZ2xvYmVPYmpUeXBlID09PSAnZ2xvYmUnO1xuICAgICAgfSk7XG4gICAgICBpZiAoIWdsb2JlSW50ZXJzZWN0cykgcmV0dXJuIG51bGw7IC8vIGNvb3JkcyBvdXRzaWRlIGdsb2JlXG5cbiAgICAgIHZhciBfc3RhdGUkZ2xvYmUkdG9HZW9Db28gPSBzdGF0ZS5nbG9iZS50b0dlb0Nvb3JkcyhnbG9iZUludGVyc2VjdHMucG9pbnQpLFxuICAgICAgICBsYXQgPSBfc3RhdGUkZ2xvYmUkdG9HZW9Db28ubGF0LFxuICAgICAgICBsbmcgPSBfc3RhdGUkZ2xvYmUkdG9HZW9Db28ubG5nO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGF0OiBsYXQsXG4gICAgICAgIGxuZzogbG5nXG4gICAgICB9O1xuICAgIH0sXG4gICAgc2NlbmU6IGZ1bmN0aW9uIHNjZW5lKHN0YXRlKSB7XG4gICAgICByZXR1cm4gc3RhdGUucmVuZGVyT2Jqcy5zY2VuZSgpO1xuICAgIH0sXG4gICAgLy8gRXhwb3NlIHNjZW5lXG4gICAgY2FtZXJhOiBmdW5jdGlvbiBjYW1lcmEoc3RhdGUpIHtcbiAgICAgIHJldHVybiBzdGF0ZS5yZW5kZXJPYmpzLmNhbWVyYSgpO1xuICAgIH0sXG4gICAgLy8gRXhwb3NlIGNhbWVyYVxuICAgIHJlbmRlcmVyOiBmdW5jdGlvbiByZW5kZXJlcihzdGF0ZSkge1xuICAgICAgcmV0dXJuIHN0YXRlLnJlbmRlck9ianMucmVuZGVyZXIoKTtcbiAgICB9LFxuICAgIC8vIEV4cG9zZSByZW5kZXJlclxuICAgIGNvbnRyb2xzOiBmdW5jdGlvbiBjb250cm9scyhzdGF0ZSkge1xuICAgICAgcmV0dXJuIHN0YXRlLnJlbmRlck9ianMuY29udHJvbHMoKTtcbiAgICB9LFxuICAgIC8vIEV4cG9zZSBjb250cm9sc1xuICAgIF9kZXN0cnVjdG9yOiBmdW5jdGlvbiBfZGVzdHJ1Y3RvcihzdGF0ZSkge1xuICAgICAgc3RhdGUuZ2xvYmUuX2Rlc3RydWN0b3IoKTtcbiAgICAgIHRoaXMucGF1c2VBbmltYXRpb24oKTtcbiAgICAgIHRoaXMucG9pbnRzRGF0YShbXSk7XG4gICAgICB0aGlzLmFyY3NEYXRhKFtdKTtcbiAgICAgIHRoaXMucG9seWdvbnNEYXRhKFtdKTtcbiAgICAgIHRoaXMucGF0aHNEYXRhKFtdKTtcbiAgICAgIHRoaXMuaGVhdG1hcHNEYXRhKFtdKTtcbiAgICAgIHRoaXMuaGV4QmluUG9pbnRzRGF0YShbXSk7XG4gICAgICB0aGlzLmhleFBvbHlnb25zRGF0YShbXSk7XG4gICAgICB0aGlzLnRpbGVzRGF0YShbXSk7XG4gICAgICB0aGlzLmxhYmVsc0RhdGEoW10pO1xuICAgICAgdGhpcy5odG1sRWxlbWVudHNEYXRhKFtdKTtcbiAgICAgIHRoaXMub2JqZWN0c0RhdGEoW10pO1xuICAgICAgdGhpcy5jdXN0b21MYXllckRhdGEoW10pO1xuICAgIH1cbiAgfSwgbGlua2VkR2xvYmVNZXRob2RzKSwgbGlua2VkUmVuZGVyT2Jqc01ldGhvZHMpLFxuICBzdGF0ZUluaXQ6IGZ1bmN0aW9uIHN0YXRlSW5pdChfcmVmNikge1xuICAgIHZhciByZW5kZXJlckNvbmZpZyA9IF9yZWY2LnJlbmRlcmVyQ29uZmlnLFxuICAgICAgX3JlZjYkd2FpdEZvckdsb2JlUmVhID0gX3JlZjYud2FpdEZvckdsb2JlUmVhZHksXG4gICAgICB3YWl0Rm9yR2xvYmVSZWFkeSA9IF9yZWY2JHdhaXRGb3JHbG9iZVJlYSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWY2JHdhaXRGb3JHbG9iZVJlYSxcbiAgICAgIGdsb2JlSW5pdENvbmZpZyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmNiwgX2V4Y2x1ZGVkKTtcbiAgICB2YXIgZ2xvYmUgPSBuZXcgVGhyZWVHbG9iZShfb2JqZWN0U3ByZWFkMih7XG4gICAgICB3YWl0Rm9yR2xvYmVSZWFkeTogd2FpdEZvckdsb2JlUmVhZHlcbiAgICB9LCBnbG9iZUluaXRDb25maWcpKTtcbiAgICByZXR1cm4ge1xuICAgICAgZ2xvYmU6IGdsb2JlLFxuICAgICAgcmVuZGVyT2JqczogVGhyZWVSZW5kZXJPYmplY3RzKHtcbiAgICAgICAgY29udHJvbFR5cGU6ICdvcmJpdCcsXG4gICAgICAgIHJlbmRlcmVyQ29uZmlnOiByZW5kZXJlckNvbmZpZyxcbiAgICAgICAgd2FpdEZvckxvYWRDb21wbGV0ZTogd2FpdEZvckdsb2JlUmVhZHksXG4gICAgICAgIGV4dHJhUmVuZGVyZXJzOiBbbmV3IFRIUkVFLkNTUzJEUmVuZGVyZXIoKV0gLy8gVXNlZCBpbiBIVE1MIGVsZW1lbnRzIGxheWVyXG4gICAgICB9KS5za3lSYWRpdXMoZ2xvYmUuZ2V0R2xvYmVSYWRpdXMoKSAqIDUwMCkuc2hvd05hdkluZm8oZmFsc2UpLm9iamVjdHMoW2dsb2JlXSkgLy8gUG9wdWxhdGUgc2NlbmVcbiAgICAgIC5saWdodHMoW25ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHhjY2NjY2MsIE1hdGguUEkpLCBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGZmZmZmZiwgMC42ICogTWF0aC5QSSldKSxcbiAgICAgIHR3ZWVuR3JvdXA6IG5ldyBHcm91cCgpXG4gICAgfTtcbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gaW5pdChkb21Ob2RlLCBzdGF0ZSkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgLy8gV2lwZSBET01cbiAgICBkb21Ob2RlLmlubmVySFRNTCA9ICcnO1xuXG4gICAgLy8gQWRkIHJlbGF0aXZlIGNvbnRhaW5lclxuICAgIGRvbU5vZGUuYXBwZW5kQ2hpbGQoc3RhdGUuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xuICAgIHN0YXRlLmNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG5cbiAgICAvLyBBZGQgcmVuZGVyT2Jqc1xuICAgIHZhciByb0RvbU5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBzdGF0ZS5jb250YWluZXIuYXBwZW5kQ2hpbGQocm9Eb21Ob2RlKTtcbiAgICBzdGF0ZS5yZW5kZXJPYmpzKHJvRG9tTm9kZSk7XG5cbiAgICAvLyBpbmplY3QgcmVuZGVyZXIgc2l6ZSBvbiB0aHJlZS1nbG9iZVxuICAgIHN0YXRlLmdsb2JlLnJlbmRlcmVyU2l6ZShzdGF0ZS5yZW5kZXJPYmpzLnJlbmRlcmVyKCkuZ2V0U2l6ZShuZXcgVEhSRUUuVmVjdG9yMigpKSk7XG5cbiAgICAvLyBzZXQgaW5pdGlhbCBkaXN0YW5jZVxuICAgIHRoaXMucG9pbnRPZlZpZXcoe1xuICAgICAgYWx0aXR1ZGU6IDIuNVxuICAgIH0pO1xuXG4gICAgLy8gY2FsaWJyYXRlIG9yYml0IGNvbnRyb2xzXG4gICAgdmFyIGdsb2JlUiA9IHN0YXRlLmdsb2JlLmdldEdsb2JlUmFkaXVzKCk7XG4gICAgdmFyIGNvbnRyb2xzID0gc3RhdGUucmVuZGVyT2Jqcy5jb250cm9scygpO1xuICAgIGNvbnRyb2xzLm1pbkRpc3RhbmNlID0gZ2xvYmVSICogMS4wMTsgLy8ganVzdCBhYm92ZSB0aGUgc3VyZmFjZVxuICAgIGNvbnRyb2xzLm1heERpc3RhbmNlID0gZ2xvYmVSICogMTAwO1xuICAgIGNvbnRyb2xzLmVuYWJsZVBhbiA9IGZhbHNlO1xuICAgIGNvbnRyb2xzLmVuYWJsZURhbXBpbmcgPSB0cnVlO1xuICAgIGNvbnRyb2xzLmRhbXBpbmdGYWN0b3IgPSAwLjE7XG4gICAgY29udHJvbHMucm90YXRlU3BlZWQgPSAwLjM7XG4gICAgY29udHJvbHMuem9vbVNwZWVkID0gMC4zO1xuICAgIGNvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIGFkanVzdCBjb250cm9scyBzcGVlZCBiYXNlZCBvbiBhbHRpdHVkZVxuICAgICAgdmFyIHBvdiA9IF90aGlzLnBvaW50T2ZWaWV3KCk7XG4gICAgICBjb250cm9scy5yb3RhdGVTcGVlZCA9IHBvdi5hbHRpdHVkZSAqIDAuMjsgLy8gTWF0aC5wb3cocG92LmFsdGl0dWRlICsgMSwgMikgKiAwLjAyNTtcbiAgICAgIGNvbnRyb2xzLnpvb21TcGVlZCA9IChwb3YuYWx0aXR1ZGUgKyAxKSAqIDAuMTsgLy8gTWF0aC5zcXJ0KHBvdi5hbHRpdHVkZSkgKiAwLjI7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aHJlZS1nbG9iZSBwb3Ygd2hlbiBjYW1lcmEgbW92ZXMsIGZvciBwcm9wZXIgaGlkaW5nIG9mIGVsZW1lbnRzXG4gICAgICBzdGF0ZS5nbG9iZS5zZXRQb2ludE9mVmlldyhzdGF0ZS5yZW5kZXJPYmpzLmNhbWVyYSgpLnBvc2l0aW9uKTtcbiAgICAgIHN0YXRlLm9uWm9vbSAmJiBzdGF0ZS5vblpvb20ocG92KTtcbiAgICB9KTtcblxuICAgIC8vIGNvbmZpZyByZW5kZXJPYmpzXG4gICAgdmFyIGdldEdsb2JlT2JqID0gZnVuY3Rpb24gZ2V0R2xvYmVPYmoob2JqZWN0KSB7XG4gICAgICB2YXIgb2JqID0gb2JqZWN0O1xuICAgICAgLy8gcmVjdXJzZSB1cCBvYmplY3QgY2hhaW4gdW50aWwgZmluZGluZyB0aGUgZ2xvYmUgb2JqZWN0XG4gICAgICB3aGlsZSAob2JqICYmICFvYmouaGFzT3duUHJvcGVydHkoJ19fZ2xvYmVPYmpUeXBlJykpIHtcbiAgICAgICAgb2JqID0gb2JqLnBhcmVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgICB2YXIgZGF0YUFjY2Vzc29ycyA9IHtcbiAgICAgIHBvaW50OiBmdW5jdGlvbiBwb2ludChkKSB7XG4gICAgICAgIHJldHVybiBkO1xuICAgICAgfSxcbiAgICAgIGFyYzogZnVuY3Rpb24gYXJjKGQpIHtcbiAgICAgICAgcmV0dXJuIGQ7XG4gICAgICB9LFxuICAgICAgcG9seWdvbjogZnVuY3Rpb24gcG9seWdvbihkKSB7XG4gICAgICAgIHJldHVybiBkLmRhdGE7XG4gICAgICB9LFxuICAgICAgcGF0aDogZnVuY3Rpb24gcGF0aChkKSB7XG4gICAgICAgIHJldHVybiBkO1xuICAgICAgfSxcbiAgICAgIGhlYXRtYXA6IGZ1bmN0aW9uIGhlYXRtYXAoZCkge1xuICAgICAgICByZXR1cm4gZDtcbiAgICAgIH0sXG4gICAgICBoZXhiaW46IGZ1bmN0aW9uIGhleGJpbihkKSB7XG4gICAgICAgIHJldHVybiBkO1xuICAgICAgfSxcbiAgICAgIGhleFBvbHlnb246IGZ1bmN0aW9uIGhleFBvbHlnb24oZCkge1xuICAgICAgICByZXR1cm4gZDtcbiAgICAgIH0sXG4gICAgICB0aWxlOiBmdW5jdGlvbiB0aWxlKGQpIHtcbiAgICAgICAgcmV0dXJuIGQ7XG4gICAgICB9LFxuICAgICAgbGFiZWw6IGZ1bmN0aW9uIGxhYmVsKGQpIHtcbiAgICAgICAgcmV0dXJuIGQ7XG4gICAgICB9LFxuICAgICAgb2JqZWN0OiBmdW5jdGlvbiBvYmplY3QoZCkge1xuICAgICAgICByZXR1cm4gZDtcbiAgICAgIH0sXG4gICAgICBjdXN0b206IGZ1bmN0aW9uIGN1c3RvbShkKSB7XG4gICAgICAgIHJldHVybiBkO1xuICAgICAgfVxuICAgIH07XG4gICAgVEhSRUUuUkVWSVNJT04gPCAxNTUgJiYgKHN0YXRlLnJlbmRlck9ianMucmVuZGVyZXIoKS51c2VMZWdhY3lMaWdodHMgPSBmYWxzZSk7IC8vIGZvcmNlIGJlaGF2aW9yIG9mIHRocmVlIDwgMTU1XG4gICAgc3RhdGUucmVuZGVyT2Jqcy5ob3Zlck9yZGVyQ29tcGFyYXRvcihmdW5jdGlvbiAoYSwgYikge1xuICAgICAgdmFyIGFPYmogPSBnZXRHbG9iZU9iaihhKTtcbiAgICAgIHZhciBiT2JqID0gZ2V0R2xvYmVPYmooYik7XG5cbiAgICAgIC8vIGRlLXByaW9yaXRpemUgYmFja2dyb3VuZCAvIG5vbi1nbG9iZSBvYmplY3RzXG4gICAgICB2YXIgaXNCYWNrZ3JvdW5kID0gZnVuY3Rpb24gaXNCYWNrZ3JvdW5kKG8pIHtcbiAgICAgICAgcmV0dXJuICFvO1xuICAgICAgfTsgLy8gfHwgby5fX2dsb2JlT2JqVHlwZSA9PT0gJ2dsb2JlJyB8fCBvLl9fZ2xvYmVPYmpUeXBlID09PSAnYXRtb3NwaGVyZSc7XG4gICAgICByZXR1cm4gaXNCYWNrZ3JvdW5kKGFPYmopIC0gaXNCYWNrZ3JvdW5kKGJPYmopO1xuICAgIH0pLnRvb2x0aXBDb250ZW50KGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIHZhciBvYmpBY2Nlc3NvcnMgPSB7XG4gICAgICAgIHBvaW50OiBzdGF0ZS5wb2ludExhYmVsLFxuICAgICAgICBhcmM6IHN0YXRlLmFyY0xhYmVsLFxuICAgICAgICBwb2x5Z29uOiBzdGF0ZS5wb2x5Z29uTGFiZWwsXG4gICAgICAgIHBhdGg6IHN0YXRlLnBhdGhMYWJlbCxcbiAgICAgICAgaGV4YmluOiBzdGF0ZS5oZXhMYWJlbCxcbiAgICAgICAgaGV4UG9seWdvbjogc3RhdGUuaGV4UG9seWdvbkxhYmVsLFxuICAgICAgICB0aWxlOiBzdGF0ZS50aWxlTGFiZWwsXG4gICAgICAgIGxhYmVsOiBzdGF0ZS5sYWJlbExhYmVsLFxuICAgICAgICBvYmplY3Q6IHN0YXRlLm9iamVjdExhYmVsLFxuICAgICAgICBjdXN0b206IHN0YXRlLmN1c3RvbUxheWVyTGFiZWxcbiAgICAgIH07XG4gICAgICB2YXIgZ2xvYmVPYmogPSBnZXRHbG9iZU9iaihvYmopO1xuICAgICAgdmFyIG9ialR5cGUgPSBnbG9iZU9iaiAmJiBnbG9iZU9iai5fX2dsb2JlT2JqVHlwZTtcbiAgICAgIHJldHVybiBnbG9iZU9iaiAmJiBvYmpUeXBlICYmIG9iakFjY2Vzc29ycy5oYXNPd25Qcm9wZXJ0eShvYmpUeXBlKSAmJiBkYXRhQWNjZXNzb3JzLmhhc093blByb3BlcnR5KG9ialR5cGUpID8gYWNjZXNzb3JGbihvYmpBY2Nlc3NvcnNbb2JqVHlwZV0pKGRhdGFBY2Nlc3NvcnNbb2JqVHlwZV0oZ2xvYmVPYmouX19kYXRhKSkgfHwgJycgOiAnJztcbiAgICB9KS5vbkhvdmVyKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIC8vIFVwZGF0ZSB0b29sdGlwIGFuZCB0cmlnZ2VyIG9uSG92ZXIgZXZlbnRzXG4gICAgICB2YXIgaG92ZXJPYmpGbnMgPSB7XG4gICAgICAgIHBvaW50OiBzdGF0ZS5vblBvaW50SG92ZXIsXG4gICAgICAgIGFyYzogc3RhdGUub25BcmNIb3ZlcixcbiAgICAgICAgcG9seWdvbjogc3RhdGUub25Qb2x5Z29uSG92ZXIsXG4gICAgICAgIHBhdGg6IHN0YXRlLm9uUGF0aEhvdmVyLFxuICAgICAgICBoZWF0bWFwOiBzdGF0ZS5vbkhlYXRtYXBIb3ZlcixcbiAgICAgICAgaGV4YmluOiBzdGF0ZS5vbkhleEhvdmVyLFxuICAgICAgICBoZXhQb2x5Z29uOiBzdGF0ZS5vbkhleFBvbHlnb25Ib3ZlcixcbiAgICAgICAgdGlsZTogc3RhdGUub25UaWxlSG92ZXIsXG4gICAgICAgIGxhYmVsOiBzdGF0ZS5vbkxhYmVsSG92ZXIsXG4gICAgICAgIG9iamVjdDogc3RhdGUub25PYmplY3RIb3ZlcixcbiAgICAgICAgY3VzdG9tOiBzdGF0ZS5vbkN1c3RvbUxheWVySG92ZXJcbiAgICAgIH07XG4gICAgICB2YXIgY2xpY2tPYmpGbnMgPSB7XG4gICAgICAgIGdsb2JlOiBzdGF0ZS5vbkdsb2JlQ2xpY2ssXG4gICAgICAgIHBvaW50OiBzdGF0ZS5vblBvaW50Q2xpY2ssXG4gICAgICAgIGFyYzogc3RhdGUub25BcmNDbGljayxcbiAgICAgICAgcG9seWdvbjogc3RhdGUub25Qb2x5Z29uQ2xpY2ssXG4gICAgICAgIHBhdGg6IHN0YXRlLm9uUGF0aENsaWNrLFxuICAgICAgICBoZWF0bWFwOiBzdGF0ZS5vbkhlYXRtYXBDbGljayxcbiAgICAgICAgaGV4YmluOiBzdGF0ZS5vbkhleENsaWNrLFxuICAgICAgICBoZXhQb2x5Z29uOiBzdGF0ZS5vbkhleFBvbHlnb25DbGljayxcbiAgICAgICAgdGlsZTogc3RhdGUub25UaWxlQ2xpY2ssXG4gICAgICAgIGxhYmVsOiBzdGF0ZS5vbkxhYmVsQ2xpY2ssXG4gICAgICAgIG9iamVjdDogc3RhdGUub25PYmplY3RDbGljayxcbiAgICAgICAgY3VzdG9tOiBzdGF0ZS5vbkN1c3RvbUxheWVyQ2xpY2tcbiAgICAgIH07XG4gICAgICB2YXIgaG92ZXJPYmogPSBnZXRHbG9iZU9iaihvYmopO1xuXG4gICAgICAvLyBpZ25vcmUgbm9uLXJlY29nbmlzZWQgb2JqIHR5cGVzXG4gICAgICBob3Zlck9iaiAmJiAhaG92ZXJPYmpGbnMuaGFzT3duUHJvcGVydHkoaG92ZXJPYmouX19nbG9iZU9ialR5cGUpICYmIChob3Zlck9iaiA9IG51bGwpO1xuICAgICAgaWYgKGhvdmVyT2JqICE9PSBzdGF0ZS5ob3Zlck9iaikge1xuICAgICAgICB2YXIgcHJldk9ialR5cGUgPSBzdGF0ZS5ob3Zlck9iaiA/IHN0YXRlLmhvdmVyT2JqLl9fZ2xvYmVPYmpUeXBlIDogbnVsbDtcbiAgICAgICAgdmFyIHByZXZPYmpEYXRhID0gc3RhdGUuaG92ZXJPYmogPyBkYXRhQWNjZXNzb3JzW3ByZXZPYmpUeXBlXShzdGF0ZS5ob3Zlck9iai5fX2RhdGEpIDogbnVsbDtcbiAgICAgICAgdmFyIG9ialR5cGUgPSBob3Zlck9iaiA/IGhvdmVyT2JqLl9fZ2xvYmVPYmpUeXBlIDogbnVsbDtcbiAgICAgICAgdmFyIG9iakRhdGEgPSBob3Zlck9iaiA/IGRhdGFBY2Nlc3NvcnNbb2JqVHlwZV0oaG92ZXJPYmouX19kYXRhKSA6IG51bGw7XG4gICAgICAgIGlmIChwcmV2T2JqVHlwZSAmJiBwcmV2T2JqVHlwZSAhPT0gb2JqVHlwZSkge1xuICAgICAgICAgIC8vIEhvdmVyIG91dFxuICAgICAgICAgIGhvdmVyT2JqRm5zW3ByZXZPYmpUeXBlXSAmJiBob3Zlck9iakZuc1twcmV2T2JqVHlwZV0obnVsbCwgcHJldk9iakRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvYmpUeXBlKSB7XG4gICAgICAgICAgLy8gSG92ZXIgaW5cbiAgICAgICAgICBob3Zlck9iakZuc1tvYmpUeXBlXSAmJiBob3Zlck9iakZuc1tvYmpUeXBlXShvYmpEYXRhLCBwcmV2T2JqVHlwZSA9PT0gb2JqVHlwZSA/IHByZXZPYmpEYXRhIDogbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZXQgcG9pbnRlciBpZiBob3ZlcmVkIG9iamVjdCBpcyBjbGlja2FibGVcbiAgICAgICAgc3RhdGUucmVuZGVyT2Jqcy5yZW5kZXJlcigpLmRvbUVsZW1lbnQuY2xhc3NMaXN0W29ialR5cGUgJiYgY2xpY2tPYmpGbnNbb2JqVHlwZV0gPyAnYWRkJyA6ICdyZW1vdmUnXSgnY2xpY2thYmxlJyk7XG4gICAgICAgIHN0YXRlLmhvdmVyT2JqID0gaG92ZXJPYmo7XG4gICAgICB9XG4gICAgfSkub25DbGljayhmdW5jdGlvbiAob2JqLCBldiwgcG9pbnQpIHtcbiAgICAgIGlmICghb2JqKSByZXR1cm47IC8vIGlnbm9yZSBiYWNrZ3JvdW5kIGNsaWNrc1xuXG4gICAgICAvLyBIYW5kbGUgY2xpY2sgZXZlbnRzIG9uIG9iamVjdHNcbiAgICAgIHZhciBvYmpGbnMgPSB7XG4gICAgICAgIGdsb2JlOiBzdGF0ZS5vbkdsb2JlQ2xpY2ssXG4gICAgICAgIHBvaW50OiBzdGF0ZS5vblBvaW50Q2xpY2ssXG4gICAgICAgIGFyYzogc3RhdGUub25BcmNDbGljayxcbiAgICAgICAgcG9seWdvbjogc3RhdGUub25Qb2x5Z29uQ2xpY2ssXG4gICAgICAgIHBhdGg6IHN0YXRlLm9uUGF0aENsaWNrLFxuICAgICAgICBoZWF0bWFwOiBzdGF0ZS5vbkhlYXRtYXBDbGljayxcbiAgICAgICAgaGV4YmluOiBzdGF0ZS5vbkhleENsaWNrLFxuICAgICAgICBoZXhQb2x5Z29uOiBzdGF0ZS5vbkhleFBvbHlnb25DbGljayxcbiAgICAgICAgdGlsZTogc3RhdGUub25UaWxlQ2xpY2ssXG4gICAgICAgIGxhYmVsOiBzdGF0ZS5vbkxhYmVsQ2xpY2ssXG4gICAgICAgIG9iamVjdDogc3RhdGUub25PYmplY3RDbGljayxcbiAgICAgICAgY3VzdG9tOiBzdGF0ZS5vbkN1c3RvbUxheWVyQ2xpY2tcbiAgICAgIH07XG4gICAgICB2YXIgZ2xvYmVPYmogPSBnZXRHbG9iZU9iaihvYmopO1xuICAgICAgdmFyIG9ialR5cGUgPSBnbG9iZU9iai5fX2dsb2JlT2JqVHlwZTtcbiAgICAgIGlmIChnbG9iZU9iaiAmJiBvYmpGbnMuaGFzT3duUHJvcGVydHkob2JqVHlwZSkgJiYgb2JqRm5zW29ialR5cGVdKSB7XG4gICAgICAgIHZhciBhcmdzID0gW2V2XTtcblxuICAgICAgICAvLyBpbmNsdWRlIGNsaWNrIGNvb3Jkc1xuICAgICAgICBpZiAob2JqVHlwZSA9PT0gJ2dsb2JlJykge1xuICAgICAgICAgIHZhciBfdGhpcyR0b0dlb0Nvb3JkcyA9IF90aGlzLnRvR2VvQ29vcmRzKHBvaW50KSxcbiAgICAgICAgICAgIGxhdCA9IF90aGlzJHRvR2VvQ29vcmRzLmxhdCxcbiAgICAgICAgICAgIGxuZyA9IF90aGlzJHRvR2VvQ29vcmRzLmxuZztcbiAgICAgICAgICBhcmdzLnVuc2hpZnQoe1xuICAgICAgICAgICAgbGF0OiBsYXQsXG4gICAgICAgICAgICBsbmc6IGxuZ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFyZ3MucHVzaChfdGhpcy50b0dlb0Nvb3Jkcyhwb2ludCkpO1xuICAgICAgICB9XG4gICAgICAgIGRhdGFBY2Nlc3NvcnMuaGFzT3duUHJvcGVydHkob2JqVHlwZSkgJiYgYXJncy51bnNoaWZ0KGRhdGFBY2Nlc3NvcnNbb2JqVHlwZV0oZ2xvYmVPYmouX19kYXRhKSk7XG4gICAgICAgIG9iakZuc1tvYmpUeXBlXS5hcHBseShvYmpGbnMsIGFyZ3MpO1xuICAgICAgfVxuICAgIH0pLm9uUmlnaHRDbGljayhmdW5jdGlvbiAob2JqLCBldiwgcG9pbnQpIHtcbiAgICAgIGlmICghb2JqKSByZXR1cm47IC8vIGlnbm9yZSBiYWNrZ3JvdW5kIGNsaWNrc1xuXG4gICAgICAvLyBIYW5kbGUgcmlnaHQtY2xpY2sgZXZlbnRzXG4gICAgICB2YXIgb2JqRm5zID0ge1xuICAgICAgICBnbG9iZTogc3RhdGUub25HbG9iZVJpZ2h0Q2xpY2ssXG4gICAgICAgIHBvaW50OiBzdGF0ZS5vblBvaW50UmlnaHRDbGljayxcbiAgICAgICAgYXJjOiBzdGF0ZS5vbkFyY1JpZ2h0Q2xpY2ssXG4gICAgICAgIHBvbHlnb246IHN0YXRlLm9uUG9seWdvblJpZ2h0Q2xpY2ssXG4gICAgICAgIHBhdGg6IHN0YXRlLm9uUGF0aFJpZ2h0Q2xpY2ssXG4gICAgICAgIGhlYXRtYXA6IHN0YXRlLm9uSGVhdG1hcFJpZ2h0Q2xpY2ssXG4gICAgICAgIGhleGJpbjogc3RhdGUub25IZXhSaWdodENsaWNrLFxuICAgICAgICBoZXhQb2x5Z29uOiBzdGF0ZS5vbkhleFBvbHlnb25SaWdodENsaWNrLFxuICAgICAgICB0aWxlOiBzdGF0ZS5vblRpbGVSaWdodENsaWNrLFxuICAgICAgICBsYWJlbDogc3RhdGUub25MYWJlbFJpZ2h0Q2xpY2ssXG4gICAgICAgIG9iamVjdDogc3RhdGUub25PYmplY3RSaWdodENsaWNrLFxuICAgICAgICBjdXN0b206IHN0YXRlLm9uQ3VzdG9tTGF5ZXJSaWdodENsaWNrXG4gICAgICB9O1xuICAgICAgdmFyIGdsb2JlT2JqID0gZ2V0R2xvYmVPYmoob2JqKTtcbiAgICAgIHZhciBvYmpUeXBlID0gZ2xvYmVPYmouX19nbG9iZU9ialR5cGU7XG4gICAgICBpZiAoZ2xvYmVPYmogJiYgb2JqRm5zLmhhc093blByb3BlcnR5KG9ialR5cGUpICYmIG9iakZuc1tvYmpUeXBlXSkge1xuICAgICAgICB2YXIgYXJncyA9IFtldl07XG5cbiAgICAgICAgLy8gaW5jbHVkZSBjbGljayBjb29yZHNcbiAgICAgICAgaWYgKG9ialR5cGUgPT09ICdnbG9iZScpIHtcbiAgICAgICAgICB2YXIgX3RoaXMkdG9HZW9Db29yZHMyID0gX3RoaXMudG9HZW9Db29yZHMocG9pbnQpLFxuICAgICAgICAgICAgbGF0ID0gX3RoaXMkdG9HZW9Db29yZHMyLmxhdCxcbiAgICAgICAgICAgIGxuZyA9IF90aGlzJHRvR2VvQ29vcmRzMi5sbmc7XG4gICAgICAgICAgYXJncy51bnNoaWZ0KHtcbiAgICAgICAgICAgIGxhdDogbGF0LFxuICAgICAgICAgICAgbG5nOiBsbmdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcmdzLnB1c2goX3RoaXMudG9HZW9Db29yZHMocG9pbnQpKTtcbiAgICAgICAgfVxuICAgICAgICBkYXRhQWNjZXNzb3JzLmhhc093blByb3BlcnR5KG9ialR5cGUpICYmIGFyZ3MudW5zaGlmdChkYXRhQWNjZXNzb3JzW29ialR5cGVdKGdsb2JlT2JqLl9fZGF0YSkpO1xuICAgICAgICBvYmpGbnNbb2JqVHlwZV0uYXBwbHkob2JqRm5zLCBhcmdzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vXG5cbiAgICAvLyBLaWNrLW9mZiByZW5kZXJlclxuICAgIHRoaXMuX2FuaW1hdGlvbkN5Y2xlKCk7XG4gIH1cbn0pO1xuXG5leHBvcnQgeyBnbG9iZSBhcyBkZWZhdWx0IH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/globe.gl/dist/globe.gl.mjs\n");

/***/ })

};
;